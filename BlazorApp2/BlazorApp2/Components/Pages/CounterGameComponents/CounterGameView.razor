@using BlazorApp2.Models
@implements IDisposable

<h1>Counter</h1>

<p role="status">Current count: @gameModel.DisplayCount</p>

<button class="btn btn-primary" @onclick="IncrementCountBtn">Click me</button>
<CounterGameShop/>

@code {

    CounterGameModel gameModel = CounterGameModel.Instance;

    private void IncrementCountBtn()
    {
        gameModel.EnqueuePlayerAction(
            new ActionWithCost{
                cost = 0,
                action =gameModel.PlayerClicked
            });
    }

    #region viewUpdate

    private void LateUpdate()
    {
        StateHasChanged();
    }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        gameModel.lateUpdateActions.Add(LateUpdate);
    }

    void IDisposable.Dispose()
    {
        gameModel.lateUpdateActions.Remove(LateUpdate);
    }
    #endregion
}
